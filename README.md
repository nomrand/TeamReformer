# チーム構成変更ツール
Xt個のチーム（各チームのチームメンバはXm人）を、Yt個のチーム（各チームのチームメンバは (Xt*Xm)/Yt人）に変更する。
構成変更後のYt個のチームは、変更前のチームの同じメンバがなるべく重複しないようにする。

## 使用方法
### exe実行の場合
```
 TeamReform.exe <構成変更後のチーム数> [入出力ファイルのディレクトリパス※省略可]
```
入出力ファイルのディレクトリパスで指定したディレクトリ（省略した場合はexeと同ディレクトリ）に、構成変更前のチームメンバ情報として、以下のファイルを配置する
* base_list.csv
  * 1行目はヘッダ行（無視される）
  * 2行目以降の各行は、変更前チームのメンバ情報
    * カラム0:メンバの属性1
    * カラム1:メンバの所属チーム（構成変更に使用する）
    * カラム2:メンバの属性2

実行後、構成変更後のチームメンバ情報として、以下のファイルが出力される（出力先は、上記入力ファイルと同じ）
* team_list.csv
  * 1行目はヘッダ行
  * 2行目以降の各行は、変更後チームのメンバ情報
    * カラム0:メンバの構成変更後の所属チーム（"0", "1", "2", ...）
    * カラム1:メンバの属性1
    * カラム2:メンバの構成変更前に所属していたチーム
    * カラム3:メンバの属性2

### Unityに取り込む場合
TeamReform\TeamReform.csを、コンパイル対象ディレクトリ（Asset\Scriptsなど）にコピーする。
以下のように、他の各CSスクリプトからチーム構成変更ユーティリティメソッドを使用できる。
```
 var beforeTeamMemberList = new List<List<String>>();
 int whichColumIsTeamName = 1;
 int howManyAfterTeams = 12;
 // ... do something
 var resultTeamMemberList = TeamReform.TeamReform.ReformTeam(beforeTeamMemberList, whichColumIsTeamName, howManyAfterTeams);
```
※詳しい使用法はTeamReform\Program.cs、およびTeamReform\TeamReform.csのコメントを参照。


## 制限事項
* 構成変更後の各チームのチーム名（上記team_list.csvのカラム0）は、数字文字（"0", "1", "2", ...）となる
* 構成変更前の各チームは、すべて同じメンバ数で構成されている必要がある（違う場合は、ダミーなどを入れて対応すること）
* Xt <= Ytの場合（変更後のチーム数の方が多い場合）、変更後チームには、同じ変更前チームのメンバは含まれない
* Xt > Ytの場合（変更後のチーム数の方が少ない場合）、変更後チームには、同じ変更前チームのメンバがなるべく少ない割合となるように含まれる

## アルゴリズム
概要としては、変更前チームの各メンバが（変更前チームごとに）、バラバラになるように変更後チームを選んでいくようなイメージ。
1. 変更前チームの順序をシャッフルする（TEAM1,TEAM2,TEAM3 -> TEAM2, TEAM1, TEAM3のように。入力ファイルの順に依らずに、適当な割り当てとなるように）
2. シャッフル後の変更前チームの各メンバの順序もシャッフルする（TEAM1のAさん、Bさん、Cさん -> TEAM1のCさん、Bさん、Aさん）

※上記シャッフルはチーム同士の順序、チーム内のメンバの順序を変えるだけで、メンバが所属しているチームは変えていない

3. シャッフル後の変更前チームの各メンバが、1人ずつ順番にランダムに変更後チームを選んでいく（TEAM2のCさんがAFTERTEAM1、BさんがAFTERTEAM2、...のように）
  * すでに他のメンバが選んだ変更後チームは、選択対象外
  * すべてのチームが選択対象外の場合は（＝すべての変更後チームに、1人ずつメンバが割り当てられたら）、再びすべての変更後チームの中から選べるようになる
4. 上記を、すべての変更前チームの各メンバが全員選択するまで繰り返す
